!function(){"use strict";angular.module("ngAudioFxCore",[])}(),function(t,e){"use strict";function o(){t.AudioContext=t.AudioContext||t.webkitAudioContext,e.getUserMedia=e.getUserMedia||e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia}angular.module("ngAudioFxCore").run(o)}(window||{},navigator||{}),function(){"use strict";function t(){return{deepCopy:function(t){return JSON.parse(JSON.stringify(t))}}}angular.module("ngAudioFxCore").factory("fxUtils",t)}(),function(){"use strict";function t(){var t={};return t.extend=function(e){var o=this.prototype||t,r=Object.create(o);t.copyOwnTo(e,r);var n=r.constructor;if(!(n instanceof Function))throw new Error("You must define a method 'constructor'");return n.prototype=r,n["super"]=o,n.extend=this.extend,n},t.copyOwnTo=function(t,e){return Object.getOwnPropertyNames(t).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}),e},t}angular.module("ngAudioFxCore").factory("FxClass",t)}(),function(){"use strict";function t(){return{getContext:function(){if(!e){if(!AudioContext)throw new Error("AudioContext is not supported in your browser!");e=new AudioContext}return e}}}angular.module("ngAudioFxCore").factory("FxSharedAudioContext",t);var e}(),function(){"use strict";function t(t,e){function o(e,o){if(c[e]){var n=t.defer();return n.resolve(c[e]),n.promise}return s[e]?s[e].promise:r(e,o)}function r(e,o){o||(o=new XMLHttpRequest);var r=t.defer();return s[e]=r,o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=function(){n(o.response,r,e)},o.onerror=function(){r.reject("Xhr error",arguments)},o.send(),r.promise}function n(t,o,r){e.getContext().decodeAudioData(t,function(t){s[r]=void 0,c[r]=t,o.resolve(t)},function(t){o.reject("Error decoding file",t)})}function i(){c=[],s=[]}function u(t){c[t]&&(c[t]=void 0),s[t]&&(s[t]=void 0)}var c={},s={};return{_cache:c,_deferreds:s,load:o,clearCache:i,removeFromCache:u,_load:r,_decodeAudio:n}}angular.module("ngAudioFxCore").factory("FxBufferLoader",t),t.$inject=["$q","FxSharedAudioContext"]}(),function(){"use strict";function t(t){var e=t.extend({constructor:function(t,e){this.offsetStart=t||0,this.offsetEnd=e||0},copy:function(t){this.offsetStart=t&&t.offsetStart,this.offsetEnd=t&&t.offsetEnd}}),o=new e(0,0);return t.extend({constructor:function(t,e){if("[object AudioBuffer]"!==Object.prototype.toString.call(t))throw new Error("requires a buffer of type AudioBuffer. see https://developer.mozilla.org/en-US/docs/Web/API/AudioBuffer");this.buffer=t,this.presets=angular.copy(o),this.presets&&this.presets.copy(e)},length:function(){return 0}})}angular.module("ngAudioFxCore").factory("FxBaseBuffer",t),t.$inject=["FxClass"]}(),function(){"use strict";function t(t){var e={CONNECTED:"CONNECTED",DISCONNECTED:"DISCONNECTED",PLAYING:"PLAYING",PAUSED:"PAUSED"};return t.extend({constructor:function(o,r){t.call(this,o,r),this.playbackState=e.DISCONNECTED},playbackStates:angular.copy(e),connect:function(t,e){return this.context=t,this.master=e,this.context?(this.source=this.context.createBufferSource(),this.gain=this.context.createGain(),this.source.buffer=this.buffer,this.source.connect(this.gain),this.master?(this.gain.connect(this.master),void(this.playbackState=FxBuffer.playbackStates.CONNECTED)):void(this.playbackState=FxBuffer.playbackStates.DISCONNECTED)):void(this.playbackState=FxBuffer.playbackStates.DISCONNECTED)},disconnect:function(){this.gain.disconnect(),this.source.disconnect(),this.gain=void 0,this.source=void 0,this.playbackState=FxBuffer.playbackStates.DISCONNECTED},length:function(){return this.buffer?(console.log(this.buffer),this.buffer.duration):0},play:function(t,o){if(this.playbackState===e.DISCONNECTED)throw new Error("cannot play, buffer is not connected.");t||(t=0),o||(o=0),t=this.context.currentTime+t;var r=this.length();this.source.start(t,o,r),this.playbackState=FxBuffer.playbackStates.PLAYING},stop:function(){this.playbackState===e.PLAYING&&(this.source.stop(0),this.playbackState=FxBuffer.playbackStates.PAUSED)}})}angular.module("ngAudioFxCore").factory("FxBuffer",t),t.$inject=["FxBaseBuffer"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1ZGlvLWZ4LWNvcmUubW9kdWxlLmpzIiwiYXVkaW8tZngtY29yZS5ydW4uanMiLCJhdWRpby1meC1jb3JlLnV0aWxzLmpzIiwiYXVkaW8tZngtY29yZS5jbGFzcy5qcyIsImF1ZGlvLWZ4LWNvcmUuc2hhcmVkLWNvbnRleHQuanMiLCJhdWRpby1meC1jb3JlLmJ1ZmZlci1sb2FkZXIuanMiLCJhdWRpby1meC1jb3JlLmJhc2UtYnVmZmVyLmpzIiwiYXVkaW8tZngtY29yZS5idWZmZXIuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsIndpbmRvdyIsIm5hdmlnYXRvciIsInJ1biIsIkF1ZGlvQ29udGV4dCIsIndlYmtpdEF1ZGlvQ29udGV4dCIsImdldFVzZXJNZWRpYSIsIndlYmtpdEdldFVzZXJNZWRpYSIsIm1vekdldFVzZXJNZWRpYSIsIm1zR2V0VXNlck1lZGlhIiwidXRpbHMiLCJkZWVwQ29weSIsIm9iaiIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsImZhY3RvcnkiLCJGeENsYXNzIiwiZXh0ZW5kIiwicHJvcGVydGllcyIsInN1cGVyUHJvdG8iLCJ0aGlzIiwicHJvdG90eXBlIiwicHJvdG8iLCJPYmplY3QiLCJjcmVhdGUiLCJjb3B5T3duVG8iLCJjdG9yIiwiY29uc3RydWN0b3IiLCJGdW5jdGlvbiIsIkVycm9yIiwic291cmNlIiwidGFyZ2V0IiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImZvckVhY2giLCJwcm9wTmFtZSIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZ2V0Q29udGV4dCIsImNvbnRleHQiLCIkcSIsIkZ4U2hhcmVkQXVkaW9Db250ZXh0IiwibG9hZCIsInVybCIsInhociIsIl9jYWNoZSIsImRlZmVycmVkIiwiZGVmZXIiLCJyZXNvbHZlIiwicHJvbWlzZSIsIl9kZWZlcnJlZHMiLCJfbG9hZCIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInJlc3BvbnNlVHlwZSIsIm9ubG9hZCIsIl9kZWNvZGVBdWRpbyIsInJlc3BvbnNlIiwib25lcnJvciIsInJlamVjdCIsImFyZ3VtZW50cyIsInNlbmQiLCJhcnJheUJ1ZmZlciIsImRlY29kZUF1ZGlvRGF0YSIsImJ1ZmZlciIsInVuZGVmaW5lZCIsImUiLCJjbGVhckNhY2hlIiwicmVtb3ZlRnJvbUNhY2hlIiwiJGluamVjdCIsIlByZXNldHMiLCJvZmZzZXRTdGFydCIsIm9mZnNldEVuZCIsImNvcHkiLCJwcmVzZXRzIiwicHJlc2V0RGVmYXVsdHMiLCJ0b1N0cmluZyIsImNhbGwiLCJsZW5ndGgiLCJGeEJhc2VCdWZmZXIiLCJwbGF5YmFja1N0YXRlcyIsIkNPTk5FQ1RFRCIsIkRJU0NPTk5FQ1RFRCIsIlBMQVlJTkciLCJQQVVTRUQiLCJwbGF5YmFja1N0YXRlIiwiY29ubmVjdCIsImF1ZGlvQ29udGV4dCIsIm1hc3RlckdhaW4iLCJtYXN0ZXIiLCJjcmVhdGVCdWZmZXJTb3VyY2UiLCJnYWluIiwiY3JlYXRlR2FpbiIsIkZ4QnVmZmVyIiwiZGlzY29ubmVjdCIsImNvbnNvbGUiLCJsb2ciLCJkdXJhdGlvbiIsInBsYXkiLCJ3aGVuIiwib2Zmc2V0IiwiY3VycmVudFRpbWUiLCJzdGFydCIsInN0b3AiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsWUFHQUEsU0FBQUMsT0FBQSx1QkNKQSxTQUFBQyxFQUFBQyxHQUNBLFlBSUEsU0FBQUMsS0FFQUYsRUFBQUcsYUFBQUgsRUFBQUcsY0FBQUgsRUFBQUksbUJBRUFILEVBQUFJLGFBQUFKLEVBQUFJLGNBQ0FKLEVBQUFLLG9CQUNBTCxFQUFBTSxpQkFDQU4sRUFBQU8sZUFUQVYsUUFBQUMsT0FBQSxpQkFBQUcsSUFBQUEsSUFXQUYsV0FBQUMsZUNkQSxXQUNBLFlBS0EsU0FBQVEsS0FDQSxPQUNBQyxTQUFBLFNBQUFDLEdBQ0EsTUFBQUMsTUFBQUMsTUFBQUQsS0FBQUUsVUFBQUgsTUFOQWIsUUFBQUMsT0FBQSxpQkFDQWdCLFFBQUEsVUFBQU4sTUNKQSxXQUNBLFlBS0EsU0FBQU0sS0FFQSxHQUFBQyxLQTJCQSxPQXpCQUEsR0FBQUMsT0FBQSxTQUFBQyxHQUNBLEdBQUFDLEdBQUFDLEtBQUFDLFdBQUFMLEVBQ0FNLEVBQUFDLE9BQUFDLE9BQUFMLEVBQ0FILEdBQUFTLFVBQUFQLEVBQUFJLEVBRUEsSUFBQUksR0FBQUosRUFBQUssV0FDQSxNQUFBRCxZQUFBRSxXQUNBLEtBQUEsSUFBQUMsT0FBQSx5Q0FPQSxPQUhBSCxHQUFBTCxVQUFBQyxFQUNBSSxFQUFBQSxTQUFBUCxFQUNBTyxFQUFBVCxPQUFBRyxLQUFBSCxPQUNBUyxHQUdBVixFQUFBUyxVQUFBLFNBQUFLLEVBQUFDLEdBS0EsTUFKQVIsUUFBQVMsb0JBQUFGLEdBQUFHLFFBQUEsU0FBQUMsR0FDQVgsT0FBQVksZUFBQUosRUFBQUcsRUFDQVgsT0FBQWEseUJBQUFOLEVBQUFJLE1BRUFILEdBR0FmLEVBaENBbEIsUUFBQUMsT0FBQSxpQkFDQWdCLFFBQUEsVUFBQUEsTUNKQSxXQUNBLFlBT0EsU0FBQUEsS0FDQSxPQUNBc0IsV0FBQSxXQUNBLElBQUFDLEVBQUEsQ0FDQSxJQUFBbkMsYUFDQSxLQUFBLElBQUEwQixPQUFBLGlEQUVBUyxHQUFBLEdBQUFuQyxjQUVBLE1BQUFtQyxLQWRBeEMsUUFBQUMsT0FBQSxpQkFDQWdCLFFBQUEsdUJBQUFBLEVBRUEsSUFBQXVCLE1DTkEsV0FDQSxZQU1BLFNBQUF2QixHQUFBd0IsRUFBQUMsR0FtQkEsUUFBQUMsR0FBQUMsRUFBQUMsR0FDQSxHQUFBQyxFQUFBRixHQUFBLENBQ0EsR0FBQUcsR0FBQU4sRUFBQU8sT0FFQSxPQURBRCxHQUFBRSxRQUFBSCxFQUFBRixJQUNBRyxFQUFBRyxRQUNBLE1BQUFDLEdBQUFQLEdBQ0FPLEVBQUFQLEdBQUFNLFFBRUFFLEVBQUFSLEVBQUFDLEdBSUEsUUFBQU8sR0FBQVIsRUFBQUMsR0FFQUEsSUFBQUEsRUFBQSxHQUFBUSxnQkFFQSxJQUFBTixHQUFBTixFQUFBTyxPQWFBLE9BWkFHLEdBQUFQLEdBQUFHLEVBRUFGLEVBQUFTLEtBQUEsTUFBQVYsR0FBQSxHQUNBQyxFQUFBVSxhQUFBLGNBQ0FWLEVBQUFXLE9BQUEsV0FDQUMsRUFBQVosRUFBQWEsU0FBQVgsRUFBQUgsSUFFQUMsRUFBQWMsUUFBQSxXQUNBWixFQUFBYSxPQUFBLFlBQUFDLFlBRUFoQixFQUFBaUIsT0FFQWYsRUFBQUcsUUFHQSxRQUFBTyxHQUFBTSxFQUFBaEIsRUFBQUgsR0FDQUYsRUFBQUgsYUFBQXlCLGdCQUFBRCxFQUFBLFNBQUFFLEdBQ0FkLEVBQUFQLEdBQUFzQixPQUNBcEIsRUFBQUYsR0FBQXFCLEVBQ0FsQixFQUFBRSxRQUFBZ0IsSUFDQSxTQUFBRSxHQUNBcEIsRUFBQWEsT0FBQSxzQkFBQU8sS0FJQSxRQUFBQyxLQUNBdEIsS0FDQUssS0FFQSxRQUFBa0IsR0FBQXpCLEdBQ0FFLEVBQUFGLEtBQ0FFLEVBQUFGLEdBQUFzQixRQUVBZixFQUFBUCxLQUNBTyxFQUFBUCxHQUFBc0IsUUFyRUEsR0FBQXBCLE1BQ0FLLElBRUEsUUFDQUwsT0FBQUEsRUFDQUssV0FBQUEsRUFNQVIsS0FBQUEsRUFDQXlCLFdBQUFBLEVBQ0FDLGdCQUFBQSxFQUNBakIsTUFBQUEsRUFDQUssYUFBQUEsR0FwQkF6RCxRQUFBQyxPQUFBLGlCQUNBZ0IsUUFBQSxpQkFBQUEsR0FFQUEsRUFBQXFELFNBQUEsS0FBQSwyQkNOQSxXQUNBLFlBUUEsU0FBQXJELEdBQUFDLEdBRUEsR0FBQXFELEdBQUFyRCxFQUFBQyxRQUNBVSxZQUFBLFNBQUEyQyxFQUFBQyxHQUNBbkQsS0FBQWtELFlBQUFBLEdBQUEsRUFDQWxELEtBQUFtRCxVQUFBQSxHQUFBLEdBRUFDLEtBQUEsU0FBQUMsR0FDQXJELEtBQUFrRCxZQUFBRyxHQUFBQSxFQUFBSCxZQUNBbEQsS0FBQW1ELFVBQUFFLEdBQUFBLEVBQUFGLGFBSUFHLEVBQUEsR0FBQUwsR0FBQSxFQUFBLEVBRUEsT0FBQXJELEdBQUFDLFFBT0FVLFlBQUEsU0FBQW9DLEVBQUFVLEdBRUEsR0FBQSx5QkFBQWxELE9BQUFGLFVBQUFzRCxTQUFBQyxLQUFBYixHQUNBLEtBQUEsSUFBQWxDLE9BQUEsMEdBR0FULE1BQUEyQyxPQUFBQSxFQUNBM0MsS0FBQXFELFFBQUEzRSxRQUFBMEUsS0FBQUUsR0FDQXRELEtBQUFxRCxTQUNBckQsS0FBQXFELFFBQUFELEtBQUFDLElBR0FJLE9BQUEsV0FDQSxNQUFBLE1BdkNBL0UsUUFBQUMsT0FBQSxpQkFDQWdCLFFBQUEsZUFBQUEsR0FFQUEsRUFBQXFELFNBQUEsY0NSQSxXQUNBLFlBTUEsU0FBQXJELEdBQUErRCxHQUVBLEdBQUFDLElBQ0FDLFVBQUEsWUFDQUMsYUFBQSxlQUNBQyxRQUFBLFVBQ0FDLE9BQUEsU0FHQSxPQUFBTCxHQUFBN0QsUUFDQVUsWUFBQSxTQUFBb0MsRUFBQVUsR0FFQUssRUFBQUYsS0FBQXhELEtBQUEyQyxFQUFBVSxHQUNBckQsS0FBQWdFLGNBQUFMLEVBQUFFLGNBRUFGLGVBQUFqRixRQUFBMEUsS0FBQU8sR0FDQU0sUUFBQSxTQUFBQyxFQUFBQyxHQUtBLE1BSEFuRSxNQUFBa0IsUUFBQWdELEVBQ0FsRSxLQUFBb0UsT0FBQUQsRUFFQW5FLEtBQUFrQixTQUtBbEIsS0FBQVUsT0FBQVYsS0FBQWtCLFFBQUFtRCxxQkFDQXJFLEtBQUFzRSxLQUFBdEUsS0FBQWtCLFFBQUFxRCxhQUNBdkUsS0FBQVUsT0FBQWlDLE9BQUEzQyxLQUFBMkMsT0FDQTNDLEtBQUFVLE9BQUF1RCxRQUFBakUsS0FBQXNFLE1BRUF0RSxLQUFBb0UsUUFLQXBFLEtBQUFzRSxLQUFBTCxRQUFBakUsS0FBQW9FLGFBQ0FwRSxLQUFBZ0UsY0FBQVEsU0FBQWIsZUFBQUMsaUJBTEE1RCxLQUFBZ0UsY0FBQVEsU0FBQWIsZUFBQUUsb0JBVkE3RCxLQUFBZ0UsY0FBQVEsU0FBQWIsZUFBQUUsZUFpQkFZLFdBQUEsV0FDQXpFLEtBQUFzRSxLQUFBRyxhQUNBekUsS0FBQVUsT0FBQStELGFBQ0F6RSxLQUFBc0UsS0FBQTFCLE9BQ0E1QyxLQUFBVSxPQUFBa0MsT0FDQTVDLEtBQUFnRSxjQUFBUSxTQUFBYixlQUFBRSxjQUVBSixPQUFBLFdBQ0EsTUFBQXpELE1BQUEyQyxRQUdBK0IsUUFBQUMsSUFBQTNFLEtBQUEyQyxRQUNBM0MsS0FBQTJDLE9BQUFpQyxVQUhBLEdBS0FDLEtBQUEsU0FBQUMsRUFBQUMsR0FFQSxHQUFBL0UsS0FBQWdFLGdCQUFBTCxFQUFBRSxhQUNBLEtBQUEsSUFBQXBELE9BQUEsd0NBR0FxRSxLQUFBQSxFQUFBLEdBQ0FDLElBQUFBLEVBQUEsR0FFQUQsRUFBQTlFLEtBQUFrQixRQUFBOEQsWUFBQUYsQ0FDQSxJQUFBRixHQUFBNUUsS0FBQXlELFFBQ0F6RCxNQUFBVSxPQUFBdUUsTUFBQUgsRUFBQUMsRUFBQUgsR0FFQTVFLEtBQUFnRSxjQUFBUSxTQUFBYixlQUFBRyxTQUVBb0IsS0FBQSxXQUVBbEYsS0FBQWdFLGdCQUFBTCxFQUFBRyxVQUlBOUQsS0FBQVUsT0FBQXdFLEtBQUEsR0FDQWxGLEtBQUFnRSxjQUFBUSxTQUFBYixlQUFBSSxXQS9FQXJGLFFBQUFDLE9BQUEsaUJBQ0FnQixRQUFBLFdBQUFBLEdBRUFBLEVBQUFxRCxTQUFBIiwiZmlsZSI6ImF1ZGlvLWZ4LWNvcmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICAvKiBqc2hpbnQgbWF4bGVuOiBmYWxzZSAqL1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwibmdBdWRpb0Z4Q29yZVwiLCBbXSk7XHJcbn0pKCk7IiwiKGZ1bmN0aW9uICh3aW5kb3csIG5hdmlnYXRvcikge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoXCJuZ0F1ZGlvRnhDb3JlXCIpLnJ1bihydW4pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHJ1bigpIHtcclxuICAgICAgICAvLyBzYW5pdGl6ZSBBdWRpb0NvbnRleHRcclxuICAgICAgICB3aW5kb3cuQXVkaW9Db250ZXh0ID0gd2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0O1xyXG4gICAgICAgIC8vIHNhbml0aXplIGdldFVzZXJNZWRpYVxyXG4gICAgICAgIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEgPSBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWEgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0b3IubXNHZXRVc2VyTWVkaWE7XHJcbiAgICB9XHJcbn0pKHdpbmRvdyB8fCB7fSwgbmF2aWdhdG9yIHx8IHt9KTtcclxuIiwiKGZ1bmN0aW9uICgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwibmdBdWRpb0Z4Q29yZVwiKVxyXG4gICAgICAgIC5mYWN0b3J5KFwiZnhVdGlsc1wiLCB1dGlscyk7XHJcblxyXG4gICAgZnVuY3Rpb24gdXRpbHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZGVlcENvcHk6IGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24gKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoXCJuZ0F1ZGlvRnhDb3JlXCIpXHJcbiAgICAgICAgLmZhY3RvcnkoXCJGeENsYXNzXCIsIGZhY3RvcnkpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGZhY3RvcnkoKSB7XHJcblxyXG4gICAgICAgIHZhciBGeENsYXNzID0ge307XHJcblxyXG4gICAgICAgIEZ4Q2xhc3MuZXh0ZW5kID0gZnVuY3Rpb24gKHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgdmFyIHN1cGVyUHJvdG8gPSB0aGlzLnByb3RvdHlwZSB8fCBGeENsYXNzO1xyXG4gICAgICAgICAgICB2YXIgcHJvdG8gPSBPYmplY3QuY3JlYXRlKHN1cGVyUHJvdG8pO1xyXG4gICAgICAgICAgICBGeENsYXNzLmNvcHlPd25Ubyhwcm9wZXJ0aWVzLCBwcm90byk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY3RvciA9IHByb3RvLmNvbnN0cnVjdG9yO1xyXG4gICAgICAgICAgICBpZiAoIShjdG9yIGluc3RhbmNlb2YgRnVuY3Rpb24pKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgbXVzdCBkZWZpbmUgYSBtZXRob2QgJ2NvbnN0cnVjdG9yJ1wiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gU2V0IHVwIHRoZSBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAgICBjdG9yLnByb3RvdHlwZSA9IHByb3RvO1xyXG4gICAgICAgICAgICBjdG9yLnN1cGVyID0gc3VwZXJQcm90bztcclxuICAgICAgICAgICAgY3Rvci5leHRlbmQgPSB0aGlzLmV4dGVuZDtcclxuICAgICAgICAgICAgcmV0dXJuIGN0b3I7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgRnhDbGFzcy5jb3B5T3duVG8gPSBmdW5jdGlvbiAoc291cmNlLCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wTmFtZSkge1xyXG4gICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wTmFtZSxcclxuICAgICAgICAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIHByb3BOYW1lKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBGeENsYXNzO1xyXG4gICAgfVxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24gKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoXCJuZ0F1ZGlvRnhDb3JlXCIpXHJcbiAgICAgICAgLmZhY3RvcnkoXCJGeFNoYXJlZEF1ZGlvQ29udGV4dFwiLCBmYWN0b3J5KTtcclxuXHJcbiAgICB2YXIgY29udGV4dDtcclxuXHJcbiAgICBmdW5jdGlvbiBmYWN0b3J5ICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBnZXRDb250ZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIUF1ZGlvQ29udGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBdWRpb0NvbnRleHQgaXMgbm90IHN1cHBvcnRlZCBpbiB5b3VyIGJyb3dzZXIhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0gbmV3IEF1ZGlvQ29udGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwibmdBdWRpb0Z4Q29yZVwiKVxyXG4gICAgICAgIC5mYWN0b3J5KCdGeEJ1ZmZlckxvYWRlcicsIGZhY3RvcnkpO1xyXG5cclxuICAgIGZhY3RvcnkuJGluamVjdCA9IFtcIiRxXCIsIFwiRnhTaGFyZWRBdWRpb0NvbnRleHRcIl07XHJcbiAgICBmdW5jdGlvbiBmYWN0b3J5ICgkcSwgRnhTaGFyZWRBdWRpb0NvbnRleHQpIHtcclxuICAgICAgICB2YXIgX2NhY2hlID0ge30sXHJcbiAgICAgICAgICAgIF9kZWZlcnJlZHMgPSB7fTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgX2NhY2hlOiBfY2FjaGUsXHJcbiAgICAgICAgICAgIF9kZWZlcnJlZHM6IF9kZWZlcnJlZHMsXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBMb2FkcyB0aGUgYXVkaW8gZGF0YSBmcm9tIGNhY2hlIG9yIGEgZ2l2ZW4gdXJsIGlmIG5vdCBjYWNoZWQuXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB1cmxcclxuICAgICAgICAgICAgICogQHJldHVybnMgeyp9XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBsb2FkOiBsb2FkLFxyXG4gICAgICAgICAgICBjbGVhckNhY2hlOiBjbGVhckNhY2hlLFxyXG4gICAgICAgICAgICByZW1vdmVGcm9tQ2FjaGU6IHJlbW92ZUZyb21DYWNoZSxcclxuICAgICAgICAgICAgX2xvYWQ6IF9sb2FkLFxyXG4gICAgICAgICAgICBfZGVjb2RlQXVkaW86IF9kZWNvZGVBdWRpb1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGxvYWQgKHVybCwgeGhyKSB7XHJcbiAgICAgICAgICAgIGlmIChfY2FjaGVbdXJsXSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoX2NhY2hlW3VybF0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoX2RlZmVycmVkc1t1cmxdKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX2RlZmVycmVkc1t1cmxdLnByb21pc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX2xvYWQodXJsLCB4aHIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBfbG9hZCAodXJsLCB4aHIpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICgheGhyKSB7IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOyB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgICAgICBfZGVmZXJyZWRzW3VybF0gPSBkZWZlcnJlZDtcclxuXHJcbiAgICAgICAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xyXG4gICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJztcclxuICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICBfZGVjb2RlQXVkaW8oeGhyLnJlc3BvbnNlLCBkZWZlcnJlZCwgdXJsKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoXCJYaHIgZXJyb3JcIiwgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgeGhyLnNlbmQoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gX2RlY29kZUF1ZGlvIChhcnJheUJ1ZmZlciwgZGVmZXJyZWQsIHVybCkge1xyXG4gICAgICAgICAgICBGeFNoYXJlZEF1ZGlvQ29udGV4dC5nZXRDb250ZXh0KCkuZGVjb2RlQXVkaW9EYXRhKGFycmF5QnVmZmVyLCBmdW5jdGlvbiAoYnVmZmVyKSB7XHJcbiAgICAgICAgICAgICAgICBfZGVmZXJyZWRzW3VybF0gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICBfY2FjaGVbdXJsXSA9IGJ1ZmZlcjtcclxuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoYnVmZmVyKTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChcIkVycm9yIGRlY29kaW5nIGZpbGVcIiwgZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2xlYXJDYWNoZSAoKSB7XHJcbiAgICAgICAgICAgIF9jYWNoZSA9IFtdO1xyXG4gICAgICAgICAgICBfZGVmZXJyZWRzID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZUZyb21DYWNoZSAodXJsKSB7XHJcbiAgICAgICAgICAgIGlmIChfY2FjaGVbdXJsXSkge1xyXG4gICAgICAgICAgICAgICAgX2NhY2hlW3VybF0gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKF9kZWZlcnJlZHNbdXJsXSkge1xyXG4gICAgICAgICAgICAgICAgX2RlZmVycmVkc1t1cmxdID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24gKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5cclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZShcIm5nQXVkaW9GeENvcmVcIilcclxuICAgICAgICAuZmFjdG9yeShcIkZ4QmFzZUJ1ZmZlclwiLCBmYWN0b3J5KTtcclxuXHJcbiAgICBmYWN0b3J5LiRpbmplY3QgPSBbXCJGeENsYXNzXCJdO1xyXG4gICAgZnVuY3Rpb24gZmFjdG9yeSAoRnhDbGFzcykge1xyXG5cclxuICAgICAgICB2YXIgUHJlc2V0cyA9IEZ4Q2xhc3MuZXh0ZW5kKHtcclxuICAgICAgICAgICAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIChvZmZzZXRTdGFydCwgb2Zmc2V0RW5kKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9mZnNldFN0YXJ0ID0gb2Zmc2V0U3RhcnQgfHwgMDtcclxuICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0RW5kID0gb2Zmc2V0RW5kIHx8IDA7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvcHk6IGZ1bmN0aW9uIChwcmVzZXRzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9mZnNldFN0YXJ0ID0gcHJlc2V0cyAmJiBwcmVzZXRzLm9mZnNldFN0YXJ0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vZmZzZXRFbmQgPSBwcmVzZXRzICYmIHByZXNldHMub2Zmc2V0RW5kO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciBwcmVzZXREZWZhdWx0cyA9IG5ldyBQcmVzZXRzKDAsIDApO1xyXG5cclxuICAgICAgICByZXR1cm4gRnhDbGFzcy5leHRlbmQoe1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ29uc3RydWN0b3IgZm9yIHRoZSBiYXNlIGJ1ZmZlclxyXG4gICAgICAgICAgICAgKiBAcGFyYW0gcHJlc2V0c1xyXG4gICAgICAgICAgICAgKiBAcGFyYW0gYnVmZmVyXHJcbiAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgY29uc3RydWN0b3I6IGZ1bmN0aW9uIChidWZmZXIsIHByZXNldHMpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNoZWNrIHR5cGVcclxuICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYnVmZmVyKSAhPT0gXCJbb2JqZWN0IEF1ZGlvQnVmZmVyXVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwicmVxdWlyZXMgYSBidWZmZXIgb2YgdHlwZSBBdWRpb0J1ZmZlci4gc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9BdWRpb0J1ZmZlclwiKVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gYnVmZmVyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcmVzZXRzID0gYW5ndWxhci5jb3B5KHByZXNldERlZmF1bHRzKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByZXNldHMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXNldHMuY29weShwcmVzZXRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGVuZ3RoOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZShcIm5nQXVkaW9GeENvcmVcIilcclxuICAgICAgICAuZmFjdG9yeShcIkZ4QnVmZmVyXCIsIGZhY3RvcnkpO1xyXG5cclxuICAgIGZhY3RvcnkuJGluamVjdCA9IFtcIkZ4QmFzZUJ1ZmZlclwiXTtcclxuICAgIGZ1bmN0aW9uIGZhY3RvcnkoRnhCYXNlQnVmZmVyKSB7XHJcblxyXG4gICAgICAgIHZhciBwbGF5YmFja1N0YXRlcyA9IHtcclxuICAgICAgICAgICAgQ09OTkVDVEVEOiBcIkNPTk5FQ1RFRFwiLFxyXG4gICAgICAgICAgICBESVNDT05ORUNURUQgOiBcIkRJU0NPTk5FQ1RFRFwiLFxyXG4gICAgICAgICAgICBQTEFZSU5HOiBcIlBMQVlJTkdcIixcclxuICAgICAgICAgICAgUEFVU0VEOiBcIlBBVVNFRFwiXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIEZ4QmFzZUJ1ZmZlci5leHRlbmQoe1xyXG4gICAgICAgICAgICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24gKGJ1ZmZlciwgcHJlc2V0cykge1xyXG5cclxuICAgICAgICAgICAgICAgIEZ4QmFzZUJ1ZmZlci5jYWxsKHRoaXMsIGJ1ZmZlciwgcHJlc2V0cyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXliYWNrU3RhdGUgPSBwbGF5YmFja1N0YXRlcy5ESVNDT05ORUNURUQ7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHBsYXliYWNrU3RhdGVzOiBhbmd1bGFyLmNvcHkocGxheWJhY2tTdGF0ZXMpLFxyXG4gICAgICAgICAgICBjb25uZWN0OiBmdW5jdGlvbiAoYXVkaW9Db250ZXh0LCBtYXN0ZXJHYWluKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0ID0gYXVkaW9Db250ZXh0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXN0ZXIgPSBtYXN0ZXJHYWluO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jb250ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5YmFja1N0YXRlID0gRnhCdWZmZXIucGxheWJhY2tTdGF0ZXMuRElTQ09OTkVDVEVEO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZSA9IHRoaXMuY29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2FpbiA9IHRoaXMuY29udGV4dC5jcmVhdGVHYWluKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZS5idWZmZXIgPSB0aGlzLmJ1ZmZlcjtcclxuICAgICAgICAgICAgICAgIHRoaXMuc291cmNlLmNvbm5lY3QodGhpcy5nYWluKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMubWFzdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5YmFja1N0YXRlID0gRnhCdWZmZXIucGxheWJhY2tTdGF0ZXMuRElTQ09OTkVDVEVEO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmdhaW4uY29ubmVjdCh0aGlzLm1hc3Rlcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXliYWNrU3RhdGUgPSBGeEJ1ZmZlci5wbGF5YmFja1N0YXRlcy5DT05ORUNURUQ7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRpc2Nvbm5lY3Q6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2Fpbi5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZS5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdhaW4gPSAgdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zb3VyY2UgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXliYWNrU3RhdGUgPSBGeEJ1ZmZlci5wbGF5YmFja1N0YXRlcy5ESVNDT05ORUNURUQ7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGxlbmd0aDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmJ1ZmZlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5idWZmZXIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLmR1cmF0aW9uO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBwbGF5OiBmdW5jdGlvbiAod2hlbiwgb2Zmc2V0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGxheWJhY2tTdGF0ZSA9PT0gcGxheWJhY2tTdGF0ZXMuRElTQ09OTkVDVEVEKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2Fubm90IHBsYXksIGJ1ZmZlciBpcyBub3QgY29ubmVjdGVkLlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXdoZW4pIHsgd2hlbiA9IDA7IH1cclxuICAgICAgICAgICAgICAgIGlmICghb2Zmc2V0KSB7IG9mZnNldCA9IDA7fVxyXG5cclxuICAgICAgICAgICAgICAgIHdoZW4gPSB0aGlzLmNvbnRleHQuY3VycmVudFRpbWUgKyB3aGVuO1xyXG4gICAgICAgICAgICAgICAgdmFyIGR1cmF0aW9uID0gdGhpcy5sZW5ndGgoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc291cmNlLnN0YXJ0KHdoZW4sIG9mZnNldCwgZHVyYXRpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucGxheWJhY2tTdGF0ZSA9IEZ4QnVmZmVyLnBsYXliYWNrU3RhdGVzLlBMQVlJTkc7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN0b3A6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wbGF5YmFja1N0YXRlICE9PSBwbGF5YmFja1N0YXRlcy5QTEFZSU5HKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc291cmNlLnN0b3AoMCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXliYWNrU3RhdGUgPSBGeEJ1ZmZlci5wbGF5YmFja1N0YXRlcy5QQVVTRUQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSkoKTtcclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9